<h1>Perguntas de modelo de anamnese</h1>

<div class="d-flex justify-content-center">
    <div *ngIf="showSpinner === true" class="m-2 text-center spinner-border text-primary"></div>
</div>

<div class="d-flex justify-content-center">
    <mat-card style="width: 50em">
        <mat-card-header>
            <h1>Pergunta</h1>
        </mat-card-header>
        <mat-card-content>
            <div class="row">
                <div class="col-sm-12">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Pergunta</mat-label>
                        <textarea matInput type="text" placeholder="Informe a pergunta" [(ngModel)]="perguntaSave.pergunta">                            
                        </textarea>
                    </mat-form-field>                    
                </div>
                <div class="col-sm-8">
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Tipo de pergunta</mat-label>
                        <mat-select placeholder="Informe o tipo" [(ngModel)]="perguntaSave.tipo">
                            <mat-option *ngFor="let pt of perguntaTipos" [value]="pt.name">
                                {{pt.label}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="col-sm-12" *ngIf="perguntaSave.tipo === 'ENUM'">                    
                    <h3 class="fw-bold">Valores de seleção</h3>

                    <div class="d-flex align-items-center">
                        <mat-form-field appearance="fill">
                            <mat-label>Valor</mat-label>
                            <input matInput type="text" placeholder="Informe o valor" [(ngModel)]="enum" />
                        </mat-form-field>

                        <span class="p-2"></span>

                        <button mat-icon-button color="primary" (click)="addEnum()">
                            <fa-icon [icon]="icons.faPlus"></fa-icon>
                        </button>
                    </div>

                    <table class="table">
                        <thead>
                            <tr>
                                <th>Valor</th>
                                <th>Remove</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let enum of enums; index as i">
                                <td class="align-middle">
                                    {{enum}}
                                </td>                               
                                <td class="align-middle">
                                    <a class="text-danger text-decoration-none" [routerLink]="[]" (click)="removeEnum(i)">
                                        <fa-icon [icon]="icons.faTrashCan"></fa-icon>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>                    
                </div>
            </div>

            <div *ngIf="infoMsg !== null" class="alert alert-success mb-2">
                {{infoMsg}}
            </div>
            <div *ngIf="erroMsg !== null" class="alert alert-danger mb-2">
                {{erroMsg}}
            </div>

            <button mat-raised-button color="primary" (click)="salva()">
                <fa-icon [icon]="icons.faSave"></fa-icon>
                Salvar
            </button>

            <br />

            <a mat-stroked-button color="primary" class="mt-3" [routerLink]="[ '/app', { outlets : { page : 'anamnese-modelo-detalhes/'+anamneseModeloId } } ]">
                <fa-icon [icon]="icons.faCircleLeft"></fa-icon>
                <span class="mx-3">Tela de detalhes</span>
            </a>
        </mat-card-content>
    </mat-card>
</div>
