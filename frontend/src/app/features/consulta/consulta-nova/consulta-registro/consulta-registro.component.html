<h1>Registro de consulta</h1>

<div class="d-flex justify-content-center">
    <div *ngIf="showSpinner === true" class="m-2 text-center spinner-border text-primary"></div>
</div>

<div style="width: 50em">
    <div class="row">                            
        <div class="col-sm-8">            
            <app-paciente-autocomplete-input
                    [clinicaId]="clinicaId"
                    (onSelect)="pacienteOnSelect($event)"
                    (onErroCreate)="pacienteOnErroCreate($event)">
            </app-paciente-autocomplete-input>                    
        </div>      
        <div class="col-sm-8">
            <mat-form-field appearance="fill" class="w-100">
                <mat-select placeholder="Selecione a especialidade" [(ngModel)]="especialidadeId" 
                        (selectionChange)="onEspecialidadeSelected( $event )">
                    <mat-option *ngFor="let e of especialidades" [value]="e.id">
                        {{e.nome}}
                    </mat-option>
                </mat-select>                
            </mat-form-field>            
        </div>                                  
        <div class="col-sm-6">
            <mat-form-field appearance="fill" class="w-100">
                <mat-label>Valor da consulta</mat-label>
                <input matInput appRealInput type="text" placeholder="Valor da consulta" 
                        [valorInicial]="consultaSave.valor"
                        (onValorAlterado)="onValorConsultaAlterado($event)">
            </mat-form-field>
        </div> 
        <div class="col-sm-6">
            <mat-checkbox class="mt-2" color="primary" [(ngModel)]="consultaSave.retorno">
                Retorno
            </mat-checkbox>
        </div>    
        <div class="col-sm-12">
            <mat-form-field appearance="fill" class="w-100">
                <mat-label>Observações</mat-label>
                <textarea matInput type="text" placeholder="Observações" [(ngModel)]="consultaSave.observacoes">
                </textarea>
            </mat-form-field>
        </div>                    

        <div class="col-sm-12">
            <div *ngIf="infoMsg !== null" class="alert alert-success mb-2">
                {{infoMsg}}
            </div>
            <div *ngIf="erroMsg !== null" class="alert alert-danger mb-2">
                {{erroMsg}}
            </div>

            <div class="d-flex align-items-center">
                <button mat-raised-button color="primary" (click)="registra()">
                    <fa-icon [icon]="icons.faSave"></fa-icon>
                    <span class="mx-3">Salvar</span>
                </button>
                <div *ngIf="showSpinner === true" class="mx-2 spinner-border text-primary"></div>
            </div>                    
        </div>
    </div>
</div>